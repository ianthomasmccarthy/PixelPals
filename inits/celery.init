#!/bin/bash

BASE='/opt/pixelpals/'
VENV_PYTHON=${BASE}'venv/bin/python'
MODULE='ppserver.pixel.tasks'
LOG=${BASE}'logs/Celery.log'
CELERY=${BASE}'venv/bin/celery'

start() {
    cd ${BASE}
    nohup ${VENV_PYTHON} ${CELERY} -A ${MODULE} worker --logfile ${LOG} 2>&1 /dev/null &
    return 0
}

case "$1" in
  start)
    start
    ;;
  *)
    echo "Usage: $0 {start}"
esac
